/******************************************
 * @name 海角社区
 * @description 海角社区解锁付费视频
 * @statement 仅供学习交流|禁止用于商业用途|违者后果自负|
              转载请注明来源|欢迎分享|拒绝倒卖|倒卖🐕必死🐎
 * @author 𝒀𝒖𝒉𝒆𝒏𝒈
 * @channel https://t.me/yqc_123
 * @feedback https://t.me/yqc_777
 * @update 20230929
 * @version 1.0.5
******************************************
❗❗❗本版本点击播放后存在网络请求，故请等待1-3秒(取决于你的网络环境)
hostname = *hj*,*haijiao*

^http[s]?:\/\/.*(haijiao|hj).+api\/(topic.*\d+|attachment)$ url script-response-body https://raw.githubusercontent.com/Yuheng0101/X/main/Scripts/haijiao.js

******************************************/
var version_='jsjiami.com.v7';function _0x1e67(){var _0xab5a9b=(function(){return[version_,'AqyjsIjwOiNRaNdhmULiRt.bYVcYFUobmkN.xRv7==','5Rsl6kEm56wd5y6Wx8k7WPmFW6PqWRO','WOhcH8kWECku','W6NcR0RcPu17WRjHWOm5WRJcTsu','ACo9jmopnSkrWPNdTa','ySkAW53dTW','D1JdVSkvda','DGz8iZtdLGG','W67dPY3cOK17o8ozW7NdS0VcGI92dmkxW4lcGrlcJCkTkfdcJ8krWOhdSIFcRq','WOxcG8kXFG','W5FcLSoxW67dHmolWQq','r8k0vSk+','oKCCW4VcMSo4uCoQWRe','c2SqW61M','CSkuW5/dPHBcOYi','WRGxWQxcNG','FuiXWOhdGq','WQOaWQNdQSkWca','W5pcJmoaW73dNSotWR1PW5pdKqy','bmowlCoBW6GU','WP04E8kHCq','CKldTmkz','W5tdHSkAw1tcOSkyg0Ks','kvnhW7hcUSoHvSoTWQ3dPxdcQKjlWQrzW4SfvSo0WQKXW4/cIW5NWQhdHSkGW6jPWQ3dL8kwASkmwCkEntrQeSkaWQhdLa','CCo8WPW','egpcTbBdKNuKFmo7','W6mAWQa','vgirEeXvWQznWO7cM8o6','W4xdLCo6oSoig8kEWOe1WOSwcW','bSoIcCoUW5lcJG3cQXZdSCoV','WR/dUbxcKeW','WQFcLZtcVmoP','WPrrwbqf','WQBdQJJcGvW1','f8orkSorW6m'].concat((function(){return['bYbgjbC','y1mPWOVdNq','gh5v','W6ldVdFcTW','tmoxWRFdMgrW','WR7dSH7dRGy/W7y','FSkKxbC','z8opW6Kg','W7TIFY3cUG','W51pnaFcVmo3bsK','WQlcK8oWW50','W5xdQmogWPxdKc7cSSo7as8L','rmkUW7dcV8or','zHjqW73cVa','qCkNvG','umk6vmk+','WRa7xmoPvSk5W7vc','W7OhWQS','WRBdR2RcRGO9jCkkWR8','WRZdRrxcIKCRDCk9WQ8','wmopW6LfW7y','CCkUW4tcJSo8WOeS','cgjAWQavWOS','WQtcISkVzmkE','bg/cTX3dR34vA8oV','i8odWOtcOKldTcvIW7FcQWhcGa','W7K5WONdOG','W47dQG0BnsuxWQWAW7JdImoTxmoBAZldSmk1vhPAWRBcOq','wvONW5xcKZxdRG','W749WPBdSW','W4JdG8oAgvBdINNcKmkfteDMtW','WQlcOwVdL8oBW4dcRmkNWQNcSrS','WRhcImoY','WQ1kwsmXWQ/cIuK','wc9tW6CVWRZdIG','WOJcI8kbsra'].concat((function(){return['W559uqtcISoeqb8l','i8o2gKddUmoJbYmFWQvBW7a','FuyVWOhdMWivbX0','h2LuWQafWOVcLtmb','WRFdLrZdIHS','WP/cMSkzqq','WOBdM152WOe','W6RdVd4','bMNcTXW','W60fCSo7WOpcHmkS','WQlcMSo3iK0','rmk0smkOWOm','WQFcTmo9W6xdL28','WQaDvmkUFG','WQ7dRrpcGKOKCCk+WRJdNSku','h2CPW7jf','iXNdG8kAoqtcMgy','W5D6tWVcQW','W7ihWQldRG','BvNcRmkHtG','W6uCWR7dOSk6uxBcVmkS','h38jW6L0','FCoEW60AW6Xraa','w8oCWRNdMhrWWR3cRse','W7xdTG3dTvaUW6zsWQmRWQdcRW','wWJcUXGHb8onWOxcGmkDvSkp','W4lcOq8cW5BcRCkMb2CVWRhcSgFcHW','W7VdPwhdK8k9W5/cLYv4WQddGbuVWRK','WO/dKHtdSHC','ts5kWROVW7JdHZtdL2RcICoQmq','zCo6t8kFx8okWP/dRmk5ASkpWQG','bw1kWOagWOdcKdmcr8oag0hdGq','WOhcQsNcUmk1'];}()));}()));}());_0x1e67=function(){return _0xab5a9b;};return _0x1e67();};function _0x1608(_0x24ab7c,_0x187913){var _0x1e6782=_0x1e67();return _0x1608=function(_0x1608bd,_0x1d5caa){_0x1608bd=_0x1608bd-0xb8;var _0x552aff=_0x1e6782[_0x1608bd];if(_0x1608['zfPCiT']===undefined){var _0x130924=function(_0x2d5675){var _0x1e703c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x38f71f='',_0x16c873='';for(var _0x1596a6=0x0,_0x41e8c1,_0x175124,_0x497687=0x0;_0x175124=_0x2d5675['charAt'](_0x497687++);~_0x175124&&(_0x41e8c1=_0x1596a6%0x4?_0x41e8c1*0x40+_0x175124:_0x175124,_0x1596a6++%0x4)?_0x38f71f+=String['fromCharCode'](0xff&_0x41e8c1>>(-0x2*_0x1596a6&0x6)):0x0){_0x175124=_0x1e703c['indexOf'](_0x175124);}for(var _0x2584bc=0x0,_0x406263=_0x38f71f['length'];_0x2584bc<_0x406263;_0x2584bc++){_0x16c873+='%'+('00'+_0x38f71f['charCodeAt'](_0x2584bc)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x16c873);};var _0x756856=function(_0xecd5dd,_0x1892f2){var _0x5dc8f6=[],_0x48f521=0x0,_0x45739d,_0x5acb8d='';_0xecd5dd=_0x130924(_0xecd5dd);var _0x4645e0;for(_0x4645e0=0x0;_0x4645e0<0x100;_0x4645e0++){_0x5dc8f6[_0x4645e0]=_0x4645e0;}for(_0x4645e0=0x0;_0x4645e0<0x100;_0x4645e0++){_0x48f521=(_0x48f521+_0x5dc8f6[_0x4645e0]+_0x1892f2['charCodeAt'](_0x4645e0%_0x1892f2['length']))%0x100,_0x45739d=_0x5dc8f6[_0x4645e0],_0x5dc8f6[_0x4645e0]=_0x5dc8f6[_0x48f521],_0x5dc8f6[_0x48f521]=_0x45739d;}_0x4645e0=0x0,_0x48f521=0x0;for(var _0x64da44=0x0;_0x64da44<_0xecd5dd['length'];_0x64da44++){_0x4645e0=(_0x4645e0+0x1)%0x100,_0x48f521=(_0x48f521+_0x5dc8f6[_0x4645e0])%0x100,_0x45739d=_0x5dc8f6[_0x4645e0],_0x5dc8f6[_0x4645e0]=_0x5dc8f6[_0x48f521],_0x5dc8f6[_0x48f521]=_0x45739d,_0x5acb8d+=String['fromCharCode'](_0xecd5dd['charCodeAt'](_0x64da44)^_0x5dc8f6[(_0x5dc8f6[_0x4645e0]+_0x5dc8f6[_0x48f521])%0x100]);}return _0x5acb8d;};_0x1608['KIdyQn']=_0x756856,_0x24ab7c=arguments,_0x1608['zfPCiT']=!![];}var _0x311072=_0x1e6782[0x0],_0x595846=_0x1608bd+_0x311072,_0x246152=_0x24ab7c[_0x595846];return!_0x246152?(_0x1608['SsDOEW']===undefined&&(_0x1608['SsDOEW']=!![]),_0x552aff=_0x1608['KIdyQn'](_0x552aff,_0x1d5caa),_0x24ab7c[_0x595846]=_0x552aff):_0x552aff=_0x246152,_0x552aff;},_0x1608(_0x24ab7c,_0x187913);}var _0x947b4e=_0x1608;(function(_0x2189a0,_0x4c462d,_0x160358,_0x349527,_0x332051,_0x136edb,_0x1a0d3b){return _0x2189a0=_0x2189a0>>0x5,_0x136edb='hs',_0x1a0d3b='hs',function(_0x19f0f2,_0xff9cb9,_0x4f3ee8,_0x40558a,_0x266909){var _0x4de9f1=_0x1608;_0x40558a='tfi',_0x136edb=_0x40558a+_0x136edb,_0x266909='up',_0x1a0d3b+=_0x266909,_0x136edb=_0x4f3ee8(_0x136edb),_0x1a0d3b=_0x4f3ee8(_0x1a0d3b),_0x4f3ee8=0x0;var _0x470bf2=_0x19f0f2();while(!![]&&--_0x349527+_0xff9cb9){try{_0x40558a=-parseInt(_0x4de9f1(0x103,'0EQv'))/0x1+parseInt(_0x4de9f1(0xe5,'7)&r'))/0x2+parseInt(_0x4de9f1(0x102,'mbzJ'))/0x3*(parseInt(_0x4de9f1(0xf3,'jzVG'))/0x4)+parseInt(_0x4de9f1(0xe4,'0k4e'))/0x5+-parseInt(_0x4de9f1(0xeb,'7)&r'))/0x6*(-parseInt(_0x4de9f1(0xe0,'otxJ'))/0x7)+parseInt(_0x4de9f1(0xea,'9SSh'))/0x8+-parseInt(_0x4de9f1(0xe2,'Wrod'))/0x9;}catch(_0x2ef57d){_0x40558a=_0x4f3ee8;}finally{_0x266909=_0x470bf2[_0x136edb]();if(_0x2189a0<=_0x349527)_0x4f3ee8?_0x332051?_0x40558a=_0x266909:_0x332051=_0x266909:_0x4f3ee8=_0x266909;else{if(_0x4f3ee8==_0x332051['replace'](/[OwULNIdqAtbFhRkyVYx=]/g,'')){if(_0x40558a===_0xff9cb9){_0x470bf2['un'+_0x136edb](_0x266909);break;}_0x470bf2[_0x1a0d3b](_0x266909);}}}}}(_0x160358,_0x4c462d,function(_0x4edc48,_0x5c25b8,_0x32c687,_0x44fb2,_0x1de603,_0x12f273,_0x532a95){return _0x5c25b8='\x73\x70\x6c\x69\x74',_0x4edc48=arguments[0x0],_0x4edc48=_0x4edc48[_0x5c25b8](''),_0x32c687='\x72\x65\x76\x65\x72\x73\x65',_0x4edc48=_0x4edc48[_0x32c687]('\x76'),_0x44fb2='\x6a\x6f\x69\x6e',(0x14080c,_0x4edc48[_0x44fb2](''));});}(0x18a0,0x40cd9,_0x1e67,0xc7),_0x1e67)&&(version_=_0x1e67);var $=new Env(_0x947b4e(0xe8,'0k4e')),service=$[_0x947b4e(0x111,'BE8a')],{body:body}=$response,base64=new Base64(),utf8=new Utf8(),haijiao=new Haijiao();if(/api\/topic\/\d+/['test']($request['url'])){var obj=JSON['parse'](body),_decrypt=haijiao[_0x947b4e(0xee,'9uYY')](obj[_0x947b4e(0xcc,'c[pF')]),_prefix=$request['url'][_0x947b4e(0x10b,'9vpK')](/(http[s]?:\/\/[^\/]+)\//)[0x1];const getVarType=_0x3a8f74=>{var _0x566b69=_0x947b4e,_0x3629e3={'IkBjv':_0x566b69(0x10a,'mbzJ'),'KxbGv':'images'};return _0x3a8f74[_0x566b69(0x114,'y#Cg')](_0x2cad23=>_0x2cad23[_0x566b69(0xc4,'Y$Q)')]==='video')?_0x566b69(0x109,'UgLV'):_0x3a8f74['find'](_0x4471e5=>_0x4471e5[_0x566b69(0x11a,'svqp')]===_0x566b69(0xed,'2Wb['))?_0x3629e3[_0x566b69(0xfb,'VBX$')]:_0x3629e3['KxbGv'];};var _type=getVarType(_decrypt[_0x947b4e(0xf9,'etst')]),_index=_decrypt['attachments'][_0x947b4e(0xbb,'Z]D9')](_0x2907f1=>_0x2907f1['category']===_type),htmlMap={'images':'','video':_0x947b4e(0xbe,'CFk0')+_decrypt[_0x947b4e(0xc2,'KpMZ')][_index]['id']+_0x947b4e(0xfd,'kg9S'),'audio':'<audio\x20src=\x22'+_decrypt[_0x947b4e(0x115,'A5&!')][_index][_0x947b4e(0x100,'Z]D9')]+_0x947b4e(0xfe,'jzVG')},_shuffix=_decrypt[_0x947b4e(0xd5,'Da]K')][_index]?.['remoteUrl']||'',_url=_shuffix?_prefix+_shuffix:'';__crack(_url)['then'](_0x29d6e5=>{var _0x2cb4fa=_0x947b4e,_0x2ee807={'QeWCT':_0x2cb4fa(0xf2,'egSf'),'cyTxY':function(_0x2c6b26,_0x1740ea){return _0x2c6b26===_0x1740ea;},'GjWvY':_0x2cb4fa(0x106,'Wrod'),'Ulmno':function(_0x4bebfa,_0xe8f749,_0x3f4305){return _0x4bebfa(_0xe8f749,_0x3f4305);},'sahYS':function(_0x2ee988,_0x58aa67){return _0x2ee988+_0x58aa67;},'McPEQ':function(_0x5049de,_0x54a5b6){return _0x5049de*_0x54a5b6;},'wumgz':function(_0x17b1ed,_0x17d2ef){return _0x17b1ed+_0x17d2ef;}};_0x29d6e5&&(_decrypt['attachments'][_index][_0x2cb4fa(0xde,'Ix(&')]=_0x29d6e5),_decrypt['content']=_decrypt[_0x2cb4fa(0xf5,'y@a4')]['replace'](_0x2cb4fa(0xf8,'f2eE'),'<head><div\x20style=\x22display:\x20flex;justify-content:\x20center;align-items:\x20center;flex-direction:\x20column;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.tips\x20{\x20animation:\x20animation\x201s\x20infinite;\x20text-shadow:\x200\x200\x203px\x20#fff,0\x200\x205px\x20#000;\x20font-size:\x2024px;\x20color:\x20red;\x20margin:\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.rows\x20{\x20margin:\x2020px\x200;\x20display:\x20flex;\x20align-items:\x20center;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.channel,\x20.mine\x20{\x20border:5px\x20#fff\x20solid;box-shadow:\x200px\x200px\x201px\x201px\x20rgba(28,\x2028,\x2032,\x200.05),\x200px\x208px\x2024px\x20rgba(28,\x2028,\x2032,\x200.12);\x20width:\x20120px;\x20height:\x20120px;\x20border-radius:\x2050%;\x20position:\x20relative;\x20overflow:\x20hidden;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.mine\x20{\x20margin-left:\x2040px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.channel\x20.img,\x20.mine\x20.img\x20{\x20position:absolute;top:0;left:0;width:\x20100%;\x20height:\x20100%;\x20background:url(https://cdn5.telegram-cdn.org/file/JmWmoF3dD3ILNteQTEYDEPS7VXLcfjJygKfo2mRbRQqQ_I9RlVPmNZ5XmAxeYDTteFLLK_PyRWgFV8jjDmbNvkZ2plCvRt7aGhgXGJ2W89bNPOZpSeA9Ag3rQPFFYh-mG0OZRoM8zDDcMeLv4TQbQjnStJhV_AhN0NIO2dONvLPqlDWVJ7htPJPibz9nJyO-nx9LtqmlDcG4gm75xm13OBcA25ASFAdSpYbWWDZUXnM9Vqxl6zibbjpmysYKL9rRY4_Hg27XnQqBdwvFh5sP5LHl2oxR06DXyK7owM50s-x97-YMTL5loHjmxq4w6oqYB-0hRvnbk49mGlDb2abTrw.jpg)\x20no-repeat\x20center/contain}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.mine\x20.img{background-image:url(https://avatars.githubusercontent.com/u/50571734?s=100&u=808616a26243d457cae2e41ffa728895e1e5ed4b&v=4)}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.channel\x20span,\x20.mine\x20span\x20{\x20position:\x20absolute;\x20bottom:\x200;\x20left:\x200;\x20width:\x20100%;\x20height:\x2030px;\x20line-height:\x2030px;\x20text-align:\x20center;\x20background-color:\x20rgba(0,\x200,\x200,\x20.5);\x20color:\x20#fff;\x20font-size:\x2014px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.channel\x20span\x20{\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20@keyframes\x20animation\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x20transform:\x20translate(0,\x200);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2050%\x20{\x20transform:\x20translate(0,\x20-10px);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x20transform:\x20translate(0,\x200);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22tips\x22>脚本免费，付费购买，必是冤种</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22rows\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20class=\x22channel\x22\x20href=\x22https://t.me/yqc_123\x22\x20target=\x22_blank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22img\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>@yqc_123</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20class=\x22mine\x22\x20href=\x22https://github.com/Yuheng0101/X\x22\x20target=\x22_blank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22img\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>@𝘠𝘶𝘩𝘦𝘯𝘨</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>')[_0x2cb4fa(0xbf,'WPA[')](/<span class=\"sell-btn\" data-floor=\"0\"><span data-sell=\"0\" class=\"sell_line1\">(.*)<\/span><span data-sell=\"0\" class=\"sell_line2\">(.*)购买(.*)<\/span>/,htmlMap[_type]),_decrypt[_0x2cb4fa(0xe6,'rSoW')](_0x2ee807[_0x2cb4fa(0x116,'DaB$')])&&(_0x2ee807[_0x2cb4fa(0xd6,'0k4e')](_0x2ee807[_0x2cb4fa(0x112,'R@9h')],_0x2cb4fa(0xcb,'9SSh'))?(_decrypt[_0x2cb4fa(0xbd,'QyP6')][_0x2cb4fa(0x108,'Da]K')]=!![],_decrypt[_0x2cb4fa(0xec,'y@a4')][_0x2cb4fa(0xc7,'R@9h')]=_0x2ee807[_0x2cb4fa(0xba,'0EQv')](parseInt,_0x2ee807['sahYS'](_0x2ee807[_0x2cb4fa(0xe7,'IjhU')](Math[_0x2cb4fa(0xd3,'@@H^')](),_0x2ee807[_0x2cb4fa(0xf4,'0k4e')](0x1388-0x3e8,0x1)),0x3e8),0xa)):(_0x5248bc[_0x2cb4fa(0xce,'5aA3')](_0x4b0e79),_0x4876be['done']({}))),$[_0x2cb4fa(0x119,'egSf')]({'body':JSON[_0x2cb4fa(0x11d,'Da]K')]({...obj,'isEncrypted':![],'data':_decrypt})});})[_0x947b4e(0xdc,'0k4e')](_0x5dbef0=>{var _0x4c1a41=_0x947b4e;console[_0x4c1a41(0x11b,'f2eE')](_0x5dbef0),$[_0x4c1a41(0xd9,'f2eE')]({});});}else{if(/api\/topic\/att\/\d+/[_0x947b4e(0xf0,'0EQv')]($request[_0x947b4e(0x118,'egSf')])){var obj=JSON[_0x947b4e(0xe9,'0EQv')](body),_decrypt=haijiao[_0x947b4e(0x10f,'9SSh')](obj[_0x947b4e(0xf6,'unVB')]);_decrypt['forEach'](_0x1a9fbf=>{var _0x1d357c=_0x947b4e,_0x1eb5c7={'ZzuRS':_0x1d357c(0xdf,'9SSh'),'uJeMg':_0x1d357c(0xef,'5aA3')},_0x515147=_0x1a9fbf?.[_0x1d357c(0xff,'26h%')]||_decrypt[0x0]['url'];_0x1a9fbf[_0x1d357c(0x10c,'rSoW')]=_0x515147[_0x1d357c(0xdd,'BE8a')](_0x1eb5c7[_0x1d357c(0x107,'Y$Q)')],_0x1eb5c7[_0x1d357c(0xcd,'9Qq3')]),_0x1a9fbf[_0x1d357c(0x113,'pouQ')]=0x0;}),$[_0x947b4e(0xfc,'2Wb[')]({'body':JSON[_0x947b4e(0xdb,'f2eE')]({...obj,'isEncrypted':![],'data':_decrypt})});}else{if(/api\/attachment/[_0x947b4e(0xc0,'QyP6')]($request[_0x947b4e(0xc3,'y#Cg')])){var ZTAaGV=_0x947b4e(0x11c,'5aA3')[_0x947b4e(0xf7,'9vpK')]('|'),ljsWjG=0x0;while(!![]){switch(ZTAaGV[ljsWjG++]){case'0':var obj=JSON[_0x947b4e(0x105,'Da]K')](body);continue;case'1':var _shuffix=_decrypt['remoteUrl'];continue;case'2':__crack(_prefix+_shuffix)['then'](_0x54a90a=>{var _0x17cf53=_0x947b4e;_decrypt[_0x17cf53(0xca,'rSoW')]=_0x54a90a,$['done']({'body':JSON[_0x17cf53(0xc9,'9vpK')]({...obj,'isEncrypted':![],'data':_decrypt})});});continue;case'3':var _decrypt=haijiao[_0x947b4e(0xb8,'DaB$')](obj[_0x947b4e(0x110,'h1Cz')]);continue;case'4':var _prefix=$request[_0x947b4e(0x101,'f2eE')][_0x947b4e(0x117,'jzVG')](/(http[s]?:\/\/[^\/]+)\//)[0x1];continue;}break;}}else $[_0x947b4e(0xcf,'Z]D9')]({});}}async function __crack(_0x2df1c6){var _0x4b7b41=_0x947b4e,_0x279672={'krgPH':_0x4b7b41(0xc5,'0k4e')};return _0x2df1c6?(await service['get']({'url':_0x2df1c6}))['body'][_0x4b7b41(0xc6,'c[pF')]('\x0a')[0x6][_0x4b7b41(0xd0,'*074')](/(\w+_*)\d+\.ts/,_0x279672[_0x4b7b41(0xd8,'R@9h')]):'';}function Haijiao(){var _0x4d7dd5=_0x947b4e,_0x1c1c04={'TbQVo':'object','tNmey':function(_0x2328dd,_0x4aab63){return _0x2328dd!==_0x4aab63;},'JaaUS':_0x4d7dd5(0x11e,'KI%O'),'AQUIz':_0x4d7dd5(0xe3,'9SSh')};return new class{[_0x4d7dd5(0xf1,'etst')](_0x183f24){var _0x2a5329=_0x4d7dd5;return _0x1c1c04[_0x2a5329(0xd1,'kg9S')]==typeof _0x183f24&&(_0x183f24=JSON['stringify'](_0x183f24)),base64[_0x2a5329(0x10e,'Ix(&')](base64[_0x2a5329(0xb9,'rSoW')](base64['encode'](utf8[_0x2a5329(0xfa,'UgLV')](_0x183f24))));}['decrypt'](_0x55425c){var _0x54cfc7=_0x4d7dd5;if(_0x1c1c04[_0x54cfc7(0xd4,'VBX$')](_0x1c1c04[_0x54cfc7(0xda,'kv!n')],_0x1c1c04['AQUIz']))return JSON[_0x54cfc7(0xd2,'egSf')](utf8['decode'](base64['decode'](base64['decode'](base64['decode'](_0x55425c)))));else _0x583c6f[_0x54cfc7(0x10d,'5aA3')]({});}}();}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Utf8(){return new class{constructor(){this.byteArray=null,this.byteCount=null,this.byteIndex=null}ucs2decode(r){for(var e,t,n=[],o=0,a=r.length;o<a;)(e=r.charCodeAt(o++))>=55296&&e<=56319&&o<a?56320==(64512&(t=r.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&t)+65536):(n.push(e),o--):n.push(e);return n}ucs2encode(r){for(var e,t=r.length,n=-1,o="";++n<t;)(e=r[n])>65535&&(o+=String.fromCharCode((e-=65536)>>>10&1023|55296),e=56320|1023&e),o+=String.fromCharCode(e);return o}checkScalarValue(r){if(r>=55296&&r<=57343)throw Error("Lone surrogate U+"+r.toString(16).toUpperCase()+" is not a scalar value")}createByte(r,e){return String.fromCharCode(r>>e&63|128)}encodeCodePoint(r){if(0==(4294967168&r))return String.fromCharCode(r);var e="";return 0==(4294965248&r)?e=String.fromCharCode(r>>6&31|192):0==(4294901760&r)?(this.checkScalarValue(r),e=String.fromCharCode(r>>12&15|224),e+=this.createByte(r,6)):0==(4292870144&r)&&(e=String.fromCharCode(r>>18&7|240),e+=this.createByte(r,12),e+=this.createByte(r,6)),e+String.fromCharCode(63&r|128)}encode(r){for(var e=this.ucs2decode(r),t=e.length,n=-1,o="";++n<t;)o+=this.encodeCodePoint(e[n]);return o}readContinuationByte(){if(this.byteIndex>=this.byteCount)throw Error("Invalid byte index");var r=255&this.byteArray[this.byteIndex];if(this.byteIndex++,128==(192&r))return 63&r;throw Error("Invalid continuation byte")}decodeSymbol(){var r,e;if(this.byteIndex>this.byteCount)throw Error("Invalid byte index");if(this.byteIndex==this.byteCount)return!1;if(r=255&this.byteArray[this.byteIndex],this.byteIndex++,0==(128&r))return r;if(192==(224&r)){if((e=(31&r)<<6|this.readContinuationByte())>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&r)){if((e=(15&r)<<12|this.readContinuationByte()<<6|this.readContinuationByte())>=2048)return this.checkScalarValue(e),e;throw Error("Invalid continuation byte")}if(240==(248&r)&&(e=(7&r)<<18|this.readContinuationByte()<<12|this.readContinuationByte()<<6|this.readContinuationByte())>=65536&&e<=1114111)return e;throw Error("Invalid UTF-8 detected")}decode(r){this.byteArray=this.ucs2decode(r),this.byteCount=this.byteArray.length,this.byteIndex=0;for(var e,t=[];!1!==(e=this.decodeSymbol());)t.push(e);return this.ucs2encode(t)}}}
// prettier-ignore
function Base64(){return new class{constructor(){this.TABLE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.REGEX_SPACE_CHARACTERS=/[\t\n\f\r ]/g}InvalidCharacterError(message){this.message=message}error(message){throw new this.InvalidCharacterError(message)}decode(input){var length=(input=String(input).replace(this.REGEX_SPACE_CHARACTERS,"")).length;length%4==0&&(length=(input=input.replace(/==?$/,"")).length),(length%4==1||/[^+a-zA-Z0-9/]/.test(input))&&this.error("Invalid character: the string to be decoded is not correctly encoded.");for(var bitCounter=0,bitStorage,buffer,output="",position=-1;++position<length;)buffer=this.TABLE.indexOf(input.charAt(position)),bitStorage=bitCounter%4?64*bitStorage+buffer:buffer,bitCounter++%4&&(output+=String.fromCharCode(255&bitStorage>>(-2*bitCounter&6)));return output}encode(input){input=String(input),/[^\0-\xFF]/.test(input)&&this.error("The string to be encoded contains characters outside of the Latin1 range.");for(var padding=input.length%3,output="",position=-1,a,b,c,buffer,length=input.length-padding;++position<length;)buffer=(a=input.charCodeAt(position)<<16)+(b=input.charCodeAt(++position)<<8)+(c=input.charCodeAt(++position)),output+=this.TABLE.charAt(buffer>>18&63)+this.TABLE.charAt(buffer>>12&63)+this.TABLE.charAt(buffer>>6&63)+this.TABLE.charAt(63&buffer);return 2==padding?(buffer=(a=input.charCodeAt(position)<<8)+(b=input.charCodeAt(++position)),output+=this.TABLE.charAt(buffer>>10)+this.TABLE.charAt(buffer>>4&63)+this.TABLE.charAt(buffer<<2&63)+"="):1==padding&&(buffer=input.charCodeAt(position),output+=this.TABLE.charAt(buffer>>2)+this.TABLE.charAt(buffer<<4&63)+"=="),output}}}
// prettier-ignore
function Env(t, e) { class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `\ud83d\udd14${this.name}, \u5f00\u59cb!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), a = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(a, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t) { let e = { "M+": (new Date).getMonth() + 1, "d+": (new Date).getDate(), "H+": (new Date).getHours(), "m+": (new Date).getMinutes(), "s+": (new Date).getSeconds(), "q+": Math.floor(((new Date).getMonth() + 3) / 3), S: (new Date).getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, ((new Date).getFullYear() + "").substr(4 - RegExp.$1.length))); for (let s in e) new RegExp("(" + s + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? e[s] : ("00" + e[s]).substr(("" + e[s]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============\ud83d\udce3\u7cfb\u7edf\u901a\u77e5\ud83d\udce3=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t.stack) : this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `\ud83d\udd14${this.name}, \u7ed3\u675f! \ud83d\udd5b ${s} \u79d2`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
